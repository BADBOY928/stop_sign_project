<div class="jumbotron jumbotron_img_responsive" id="header">
  <h1 class="display-3">Stop Sign Detector</h1>
</div>
<hr>
<div class="row">
  <div class="col">
    <h3>So there's this Stop Sign</h3>
    <img src="http://i.imgur.com/yxzMhh4.png" class="img-fluid" />
  </div>
</div>
<hr>
<div class="row">
  <h2>Everyone Runs this Sign</h2>
</div>
<div class="row">
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/9RKrizy.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/4aPfN1o.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/vgWoO74.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/YVhuF4X.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/J9Ws2jZ.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/vGNHUeA.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/FTAsNQp.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/xX7EvvA.gif" />
  </div>
  <div class="col-sm-4">
    <img class="img-responsive" style="width:100% ;padding-top: 2px" src="http://i.imgur.com/h8YfYmJ.gif" />
  </div>
</div>
<hr>
<div class="row">
  <div class="col-sm-12">
    <h2>My house has a good view of it from the back...</h2>
    <div class="embed-responsive embed-responsive-16by9">
      <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/jPK0Q58wMNg?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>
</div>
<hr>
<div class="row">
  <div class="col-sm-12">
    <h2>But of course, I can't spend time counting cars...</h2>
    <p><b>But a webcam attached to a Raspberry Pi sure can</b></p>
    <img class="img img-responsive" src="http://i.imgur.com/nolbmkf.jpg" />
  </div>
</div>
<hr>
<div class="row">
  <h2>📊 Current Stats ⏱️</h2>
</div>
<div class="row">
  <div class="col">
    <%= @stats.observation_period_count %> Total scans, <%= @stats.stop_sign_log_count %> total suspected cases
  </div>
  <div class="col">
    <%= (@stats.seconds_observed/60/60).to_i.delimited %>+ Hours collected, spanning <%= (@stats.total_study_time/60/60/24).to_i.delimited %> days
  </div>
</div>
<div class="row">
  <div class="col">
    ≈<%= MachineLearner.first(vote_method: "presence").estimated_count %> total cars seen, ≈<%= MachineLearner.first(vote_method: "full_scene").estimated_count %> seen long enough to measure. An estimated ≈<%= ((@stats.total_study_time/@stats.seconds_observed)*MachineLearner.first(vote_method: "presence").estimated_count).to_i.delimited %> cars have passed the sign, with an average of ≈<%= (((@stats.total_study_time/@stats.seconds_observed)*MachineLearner.first(vote_method: "presence").estimated_count) / (@stats.total_study_time/60/60/24)).to_i.delimited %> per day.
  </div>
</div>
<div class="row">
  <div class="col">
    Machine learning on stop violations is still pending - too few actual stops to accurately assess. As of now, <%= (@stats.current_violation_votes[0] / @stats.current_violation_votes.sum).round(4) * 100 %>% of all stops are violations according to human assessment, leading to an estimated <%= (MachineLearner.first(vote_method: "presence").estimated_count*((@stats.current_violation_votes[0] / @stats.current_violation_votes.sum).round(4))).to_i.delimited %> observed violations, with an estimated ≈<%= ((@stats.total_study_time/@stats.seconds_observed)*(MachineLearner.first(vote_method: "presence").estimated_count*((@stats.current_violation_votes[0] / @stats.current_violation_votes.sum).round(4)))).to_i.delimited %> total stop sign runs since monitoring began.
  </div>
</div>
<hr />
<div class="row">
  <h2>🏋️ Help Train the Machine 🏋️</h2>
</div>
<div class="row">
  <div class="col">
    <h3><a href="/train/presence">Train Car Presence</a></h3>
    <%= @stats.presence_vote_count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "presence") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "presence").accuracy %>% (<a href="/machine/presence">see examples</a>)</p>
    <% end %>
  </div>
  <div class="col">
    <h3><a href="/train/full_scene">Train Full Scene Check</a></h3>
    <%= @stats.full_scene_vote_count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "full_scene") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "full_scene").accuracy %>% (<a href="/machine/full_scene">see examples</a>)</p>
    <% end %>
  </div>
</div>
<div class="row">
  <div class="col">
    <h3><a href="/train/stop_violations">Train Stop Violations</a></h3>
    <%= @stats.stop_violations_vote_count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "stop_violations") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "stop_violations").accuracy %>% (<a href="/machine/stop_violations">see examples</a>)</p>
    <% end %>
  </div>
  <div class="col">
    <h3><a href="/train/wrong_way_violations">Train Wrong Way Violations</a></h3>
    <%= @stats.wrong_way_violations_vote_count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "wrong_way_violations") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "wrong_way_violations").accuracy %>% (<a href="/machine/wrong_way_violations">see examples</a>)</p>
    <% end %>
  </div>
</div>
<hr />
<footer>
  <a href="http://devingaffney.com">Devin, 2017</a> | <a href="http://github.com/DGaffney/stop_sign_project">GitHub</a>
</footer>
