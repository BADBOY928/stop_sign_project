<div class="jumbotron jumbotron_img_responsive" id="header">
  <h1 class="display-3">Stop Sign Detector</h1>
</div>
<hr>
<div class="row">
  <h2>📊 Current Stats ⏱️</h2>
</div>
<div class="row">
  <div class="col">
    <%= ObservationPeriod.count.delimited %> Total scans, <%= StopSignLog.count.delimited %> total suspected cases
  </div>
  <div class="col">
    <%= (@total_time/60/60).to_i.delimited %>+ Hours collected, spanning <%= ((ObservationPeriod.order(:end_time.desc).first.end_time-ObservationPeriod.order(:start_time).first.start_time)/60/60/24).to_i.delimited %> days
  </div>
</div>
<div class="row">
  <div class="col">
    ≈<%= MachineLearner.first(vote_method: "presence").estimated_count %> total cars seen, ≈<%= MachineLearner.first(vote_method: "full_scene").estimated_count %> seen long enough to measure.
  </div>
</div>
<hr />
<div class="row">
  <h2>🏋️ Help Train the Machine 🏋️</h2>
</div>
<div class="row">
  <div class="col">
    <h3><a href="/train/presence">Train Car Presence</a></h3>
    <%= Vote.where(vote_method: "presence").count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "presence") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "presence").accuracy %>% (<a href="/machine/presence">see examples</a>)</p>
    <% end %>
  </div>
  <div class="col">
    <h3><a href="/train/full_scene">Train Full Scene Check</a></h3>
    <%= Vote.where(vote_method: "full_scene").count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "full_scene") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "full_scene").accuracy %>% (<a href="/machine/full_scene">see examples</a>)</p>
    <% end %>
  </div>
</div>
<div class="row">
  <div class="col">
    <h3><a href="/train/stop_violations">Train Stop Violations</a></h3>
    <%= Vote.where(vote_method: "stop_violations").count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "stop_violations") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "stop_violations").accuracy %>% (<a href="/machine/stop_violations">see examples</a>)</p>
    <% end %>
  </div>
  <div class="col">
    <h3><a href="/train/wrong_way_violations">Train Wrong Way Violations</a></h3>
    <%= Vote.where(vote_method: "wrong_way_violations").count.delimited %> total votes recorded
    <% if MachineLearner.first(vote_method: "wrong_way_violations") %>
      <p>Current Machine Accuracy: <%= MachineLearner.first(vote_method: "wrong_way_violations").accuracy %>% (<a href="/machine/wrong_way_violations">see examples</a>)</p>
    <% end %>
  </div>
</div>
<hr />
<div class="row">
  <div class="col">
    <h3>💬 Explanation 💬</h3>
    <img src="http://imgur.com/mYmKwT1.png" class="img-fluid" />
    I live near a big thoroughfare, the <a href="https://en.wikipedia.org/wiki/Alewife_Brook_Parkway">Alewife Brook Parkway</a>. During rush hour, it gets real clogged up, so people skirt around the neighborhoods on the sides of the parkway to avoid intersections, which leads them right past my house, where they often ignore the stop sign. Signs say you're not supposed to go through the neighborhood during rush hour, and there's a kids park 20 feet away from the sign, which is kind of unsafe. My housemates and I call these people the "go-arounders".</p>
    <p>One day, I got it in my head that maybe I could use machine learning, computer vision, and a Raspberry Pi with a webcam to actually measure how many people go through it, potentially. Knowing that there was a number I <em>could</em> know led me to <em>needing</em> to go all the way and see if I could actually pull it off. These are the results. 
  </div>
</div>
<footer>
  <a href="http://devingaffney.com">Devin, 2017</a> | <a href="http://github.com/DGaffney/stop_sign_project">GitHub</a>
</footer>
